
{% extends 'base.html.twig' %}

{% block body %}

<div class="navbar navbar-inverse navbar-static-top">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar2" aria-expanded="false" aria-controls="navbar2">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">List of Documents</a>
    </div>
    <div id="navbar2" class="collapse navbar-collapse">
      <ul class="nav navbar-nav navbar-left">
	
      </ul>
      <form class="navbar-form navbar-right inline-form sortingForm" action="/item/list" method="post">
        <div class="form-group">
	  <div class="input-group">
	    <label class="input-group-addon" for="category">Category :</label>
	    <select id="category" name="category" class="form-control" >
	      <option value='' selected>All</option>
	      {% for c in categories %}
	      <option value="{{c.id}}">{{c.subject}}</option>
	      {% endfor %}
	    </select>
	  </div>
	  <div class="input-group">
	    <label class="input-group-addon" for="type">Type :</label>
	    <select id="type" name="type" class="form-control" >
	      <option value='' selected>All</option>
	      {% for t in types %}
	      <option value="{{t.id}}">{{t.name}}</option>
	      {% endfor %}
	    </select>
	  </div>
	  <div class="input-group">
	    <label class="input-group-addon" for="language">Language :</label>
	    <select id="language" name="language" class="form-control" >
	      <option value='' selected>All</option>
	      {% for l in languages %}
	      <option value="{{l.id}}">{{l.getLangName()}}</option>
	      {% endfor %}
	    </select>
	  </div>
          <input type="search" name="Search" class="input-sm form-control" placeholder="Recherche">
          <button type="submit" class="btn btn-primary btn-sm"><span class="glyphicon glyphicon-eye-open"></span> Search</button>
        </div>
      </form>
    </div>
  </div>
</div>

<div class="container">
  <input hidden value="{{app.session.get('isAdmin')}}" id='isAdmin'></input>
  <input hidden value="{{item.getCode()}}" id='itemCode'></input>
  <div class="col-md-6 col-xs-12">
    <h1>{{ item.getTitle() }}</h1>
    <p><strong>Date of publication :</strong> {{ item.getPublicationYear() }}</p>
    <p><strong>Author :</strong> {{ item.getAuthor() }}</p>
    <p><strong>Publisher :</strong> {{ item.getPublisher() }}</p>
    <p><strong>Category :</strong> {{ item.getCategory().getSubject() }}</p>
    <p><strong>Disponibility :</strong> <span class={% if item.getBookable() == 1 %}"label label-success">Available{% else %}"label label-warning">Not Available{% endif %}</span></p>
    {% if app.session.get('isAdmin') == false %}
    {% if app.session.get('connected') %}
    <div class="item-info" onmouseout="GestionHover('{{item.getCode()}}',-1,5)">Note this item :
      <ul class="listeEtoile" style="list-style-type : none;">
	{% for i in range(1,5) %}
	<li>
	  <a onclick="note('{{item.getCode()}}',{{i}},event)" onmouseover="GestionHover('{{item.getCode()}}',{{i}},5)">
	    <img id="staroff-{{i}}" src="{{ asset('img/staroff.png') }}" border="0" title="{{i}}" style="height: 50px; width:50px; border-width: 0px; display: block;">
	    <img id="staron-{{i}}" src="{{ asset('img/staron.png') }}" border="0" title="{{i}}" style="height: 50px; width:50px; border-width: 0px; display: none;">
	  </a>
	</li>
	{% endfor %}
      </ul>
    </div>
    {% endif %}
    {% endif %}
    <button value={{item.getCode()}} class="btn btn-primary">Book</button>
  </div>
  <ul class="media-list col-md-6 col-xs-12">
    <li class="media thumbnail">
      <a class="pull-left" href="#">
        <img class="media-object" src="images/ico01.png">
      </a>
      <div class="media-body">
        <h4 class="media-heading">Suggestion</h4>
        <p>Je pense souhaitable d'interdire la chasse au tigre pour préserver l'espèce !</p>
        <div class="media thumbnail">
          <a class="pull-left" href="#">
            <img class="media-object" src="images/ico02.png">
          </a>
          <div class="media-body">
            <h4 class="media-heading">Animaux dangereux</h4>
            <p>Tu délires complètement, ce sont des animaux trop dangereux pour les laisser vivre.</p>
            <div class="media thumbnail">
              <a class="pull-left" href="#">
                <img class="media-object" src="images/ico01.png">
              </a>
              <div class="media-body">
                <h4 class="media-heading">Quel délire !</h4>
                <p>C'est toi qui délires ! Il faut préserver la bio-diversité. Les tigres ne sont pas vraiment dangereux, c'est l'homme qui l'est !</p>
              </div>
            </div>
          </div>
          <div class="media">
            <a class="pull-left" href="#">
              <img class="media-object" src="images/ico02.png">
            </a>
            <div class="media-body">
              <h4 class="media-heading">Quel courage !</h4>
              <p>J'aimerais te voir face à un tigre toi !</p>
            </div>
          </div>
        </div>
        <div class="media thumbnail">
          <a class="pull-left" href="#">
            <img class="media-object" src="images/ico03.png">
          </a>
          <div class="media-body">
            <h4 class="media-heading">Un peu de calme</h4>
            <p>Je suis favorable à la préservation de l'espèce mais dans des sites protégés.</p>
            <div class="media thumbnail">
              <a class="pull-left" href="#">
                <img class="media-object" src="images/ico04.png">
              </a>
              <div class="media-body">
                <h4 class="media-heading">Tu as vu ta tête !</h4>
                <p>Avec la tête que tu as tu ferais même peur à un tigre toi !</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </li>
  </ul>
  {% if app.session.get('isAdmin') %}
  
  <h1>Details for admin</h1>
  <div class="item-info-list">
    <div class="item-info">Total units : {{ item.getTotalUnit() }} </div>
    <div class="item-info">Borrowed units : {{ item.getBorrowedUnit() }} </div>
    <div class="item-info">Lost units : {{ item.getLostUnit() }} </div>
    <div class="item-info">Cost : {{ item.getCost() }} $ </div>
  </div>
  {% if item.getDisable()==0 %}
  <div class="item-info">Disabled : No </div>
</div>
<a href="/admin/disable_item/
	 {{item.getCode()}}
	 "><button class="InputAddOn-item">Disable</button></a>
{% else %}
<div class="item-info">Disabled : Yes </div>
</div>
<a href="/admin/reactivate_item/
	 {{item.getCode()}}
	 "><button class="InputAddOn-item">Reactivate</button></a>
{% endif %}
<form action="/item/add_units/{{item.getCode()}}" method="post" onsubmit="return testForm(this)" class="big-form">
  <div class="InputAddOn">
    <input type="number" id="amount" onchange="testAmount(this)" name="amount" class="InputAddOn-field">
  </div>
  <div class="InputAddOn submit-login">
    <button type="submit" id="submit" class="InputAddOn-item">Add units</button>
  </div>
</form>
<form action="/item/add_lost_units/{{item.getCode()}}" method="post" onsubmit="return testForm(this)" class="big-form">
  <div class="InputAddOn">
    <input type="number" id="amount" onchange="testAmount(this)" name="amount" class="InputAddOn-field">
  </div>
  <div class="InputAddOn submit-login">
    <button type="submit" id="submit" class="InputAddOn-item">Add LOST units</button>
  </div>
</form>
</div>
<div class="InputAddOn">
  <a href="/item/create/update/{{item.getCode()}}"><button class="InputAddOn-item">Update informations</button></a>
</div>
{% endif %}

</div>
{% endblock %}


{% block javascripts %}
<script>	
  function testAmount(input){
  var reg = new RegExp("^[1-9][0-9]*$");
  if(reg.test(input.value)){
  input.style.borderColor="";
  return true;
  }else{
  input.style.borderColor="red";
  return false;
  }
  }
  
  function testForm(form){
  return testAmount(form.amount);
  }
</script>
<script src="{{ asset('js/note.js') }}"></script>
<script src="{{ asset('js/ajax.js') }}"></script>
{% endblock %}
