
{% extends 'base.html.twig' %}

{% block body %}

<nav class="menu-list">
  <form class="menu-list-search" action="/item/search" method="post">
    <div class="InputAddOn">
      <input class="InputAddOn-field" type="text" name="Search">
      <button class="InputAddOn-item" type="submit">Search</button>
    </div>
  </form>
  <div class="menu-list-element">
    Category : <select name="category">
      {% for c in categories %}
      <option value="{{c.id}}">{{c.subject}}</option>
      {% endfor %}
      </select>
  </div>
  <div class="menu-list-element">
    Type : <select name="type">
      {% for t in types %}
      <option value="{{t.id}}">{{t.name}}</option>
      {% endfor %}
      </select>
  </div>
  <div class="menu-list-element">
       Language : <select name="language">
		{% for l in languages %}
		<option value="{{l.id}}">{{l.getLangName()}}</option>
		{%endfor%}
	</select>
  </div>
</nav>

<article class="item-list">
  <h1>Details of item</h1>
  <div class="item-info-list">
    <div class="item-info">Name : {{ item.getTitle() }}</div>
    <div class="item-info">Date of publication : {{ item.getPublicationYear() }}</div>
    <div class="item-info">Author : {{ item.getAuthor() }}</div>
    <div class="item-info">Publisher : {{ item.getPublisher() }}</div>
    <div class="item-info">Category : {{ item.getCategory().getSubject() }}</div>
    <div class="item-info">Disponibility : {{ item.getBookable() }}</div>
  </div>
  <a href="/item/book/{{ item.getCode() }}"><button class="InputAddOn-item" type="submit">Book</button></a>
	{% if app.session.get('isAdmin') %}
	
	<h1>Details for admin</h1>
	<div class="item-info-list">
	<div class="item-info">Total units : {{ item.getTotalUnit() }} </div>
	</div>
		{% if item.getDisable()==0 %}
				<div class="item-info">Disabled : No </div>
				</div>
				<a href="/admin/disable_item/
				{{item.getCode()}}
				"><button class="InputAddOn-item">Disable</button></a>
		{% else %}
				<div class="item-info">Disabled : Yes </div>
				</div>
				<a href="/admin/reactivate_item/
				{{item.getCode()}}
				"><button class="InputAddOn-item">Reactivate</button></a>
		{% endif %}
		<form action="/item/add_units/{{item.getCode()}}" method="post" onsubmit="return testForm(this)" class="big-form">
		<div class="InputAddOn">
			<input type="number" id="amount" onchange="testAmount(this)" name="amount" class="InputAddOn-field">
		</div>
		<div class="InputAddOn submit-login">
			<button type="submit" id="submit" class="InputAddOn-item">Add units</button>
		</div>
		</form>
	{% endif %}
	
</article>
{% endblock %}
{% block javascripts %}
<script>
	
	function testAmount(input){
		var reg = new RegExp("^[1-9][0-9]*$");
		if(reg.test(input.value)){
			input.style.borderColor="";
			return true;
		}else{
			input.style.borderColor="red";
			return false;
		}
	}
	
	function testForm(form){
		return testAmount(form.amount);
	}
</script>
{% endblock %}